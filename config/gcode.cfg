[gcode_macro BEGIN_PRINT]
G21 ; set units to millimeters
M107 ; fan off
M140 S{material_bed_temperature_layer_0} ; set bed temp
M190 S{material_bed_temperature_layer_0} ; wait for bed temperature to be reached
M104 T0 S{material_print_temperature_layer_0} ; start heating extruder 1
G28; Home all axes
BED_MESH_CALIBRATE PROFILE="default"; Start ABL
M109 T0 S{material_print_temperature_layer_0} ; wait for extruder 1 to reach temperature
G90 ; use absolute coordinates
M83 ; use relative distance for extrusion

[gcode_macro END_PRINT]
M104 S0 ; stop bed heater
M140 S0 ; stop extruder heater
G92 E1 ; set the extruder position to 1
G1 E-1 F300 ; Retract the filament
G28 X0 Y0 ; home X,Y
M84 ; disable steppers
